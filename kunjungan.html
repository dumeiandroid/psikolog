<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard Kunjungan ‚Äî Psikologi</title>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=Instrument+Sans:wght@300;400;500&display=swap" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg: #0e1117;
      --surface: #161b25;
      --surface2: #1e2535;
      --border: #2a3347;
      --accent: #7a9e7e;
      --accent2: #a8c5ac;
      --text: #e8edf5;
      --muted: #8a96ab;
      --danger: #e07070;
      --gold: #d4a96a;
    }

    body {
      font-family: 'Instrument Sans', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
    }

    /* ‚îÄ‚îÄ Header ‚îÄ‚îÄ */
    header {
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      padding: 20px 32px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    .logo {
      font-family: 'Syne', sans-serif;
      font-size: 20px;
      font-weight: 800;
      letter-spacing: -0.5px;
    }
    .logo span { color: var(--accent); }
    .header-right {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    .date-badge {
      background: var(--surface2);
      border: 1px solid var(--border);
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 13px;
      color: var(--muted);
    }
    .date-badge strong { color: var(--text); }
    .btn-refresh {
      background: var(--accent);
      color: white;
      border: none;
      padding: 8px 18px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      font-family: inherit;
      transition: background 0.2s, transform 0.15s;
      display: flex; align-items: center; gap: 6px;
    }
    .btn-refresh:hover { background: #6a8e6e; transform: translateY(-1px); }
    .btn-refresh.loading { opacity: 0.7; pointer-events: none; }

    /* ‚îÄ‚îÄ Main ‚îÄ‚îÄ */
    main {
      max-width: 1200px;
      margin: 0 auto;
      padding: 32px 24px;
    }

    /* ‚îÄ‚îÄ Summary Cards ‚îÄ‚îÄ */
    .summary-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 32px;
    }
    .stat-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 24px;
      position: relative;
      overflow: hidden;
      animation: fadeUp 0.5s ease both;
    }
    .stat-card::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 3px;
      border-radius: 16px 16px 0 0;
    }
    .stat-card.green::before  { background: var(--accent); }
    .stat-card.blue::before   { background: #6ab0d4; }
    .stat-card.gold::before   { background: var(--gold); }
    .stat-card.purple::before { background: #a085d4; }

    .stat-icon { font-size: 28px; margin-bottom: 12px; }
    .stat-label { font-size: 11px; text-transform: uppercase; letter-spacing: 1.5px; color: var(--muted); margin-bottom: 6px; }
    .stat-value { font-family: 'Syne', sans-serif; font-size: 36px; font-weight: 800; line-height: 1; }
    .stat-sub { font-size: 12px; color: var(--muted); margin-top: 6px; }

    /* ‚îÄ‚îÄ Grid dua kolom ‚îÄ‚îÄ */
    .two-col {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 24px;
    }
    @media (max-width: 768px) { .two-col { grid-template-columns: 1fr; } }

    /* ‚îÄ‚îÄ Panel ‚îÄ‚îÄ */
    .panel {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      overflow: hidden;
      animation: fadeUp 0.5s ease both;
    }
    .panel-header {
      padding: 18px 24px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .panel-title {
      font-family: 'Syne', sans-serif;
      font-size: 15px;
      font-weight: 700;
    }
    .panel-body { padding: 20px 24px; }

    /* ‚îÄ‚îÄ Filter bar ‚îÄ‚îÄ */
    .filter-bar {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 20px;
      align-items: center;
    }
    .filter-bar select,
    .filter-bar input {
      background: var(--surface2);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 8px 14px;
      border-radius: 10px;
      font-size: 13px;
      font-family: inherit;
      outline: none;
      transition: border-color 0.2s;
    }
    .filter-bar select:focus,
    .filter-bar input:focus { border-color: var(--accent); }
    .filter-bar label { font-size: 13px; color: var(--muted); }

    /* ‚îÄ‚îÄ Chart ‚îÄ‚îÄ */
    .chart-wrap { position: relative; height: 220px; }

    /* ‚îÄ‚îÄ Table ‚îÄ‚îÄ */
    .tbl-wrap { overflow-x: auto; }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }
    thead th {
      text-align: left;
      padding: 10px 14px;
      font-family: 'Syne', sans-serif;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--muted);
      border-bottom: 1px solid var(--border);
      white-space: nowrap;
    }
    tbody tr {
      border-bottom: 1px solid #1a2030;
      transition: background 0.15s;
    }
    tbody tr:hover { background: var(--surface2); }
    tbody td {
      padding: 12px 14px;
      vertical-align: middle;
    }
    .badge {
      display: inline-block;
      padding: 3px 10px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 500;
      background: var(--surface2);
      border: 1px solid var(--border);
    }
    .badge-green { background: rgba(122,158,126,0.15); border-color: var(--accent); color: var(--accent2); }
    .clicks-pill {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 28px; height: 28px;
      border-radius: 50%;
      font-weight: 700;
      font-size: 12px;
      background: var(--surface2);
      border: 1px solid var(--border);
    }
    .clicks-pill.hot { background: rgba(212,169,106,0.15); border-color: var(--gold); color: var(--gold); }

    /* ‚îÄ‚îÄ Empty / loading states ‚îÄ‚îÄ */
    .empty-state {
      text-align: center;
      padding: 48px 24px;
      color: var(--muted);
    }
    .empty-icon { font-size: 40px; margin-bottom: 12px; }
    .skeleton {
      background: linear-gradient(90deg, var(--surface2) 25%, var(--border) 50%, var(--surface2) 75%);
      background-size: 200% 100%;
      animation: shimmer 1.2s infinite;
      border-radius: 8px;
      height: 18px;
      margin: 6px 0;
    }
    @keyframes shimmer { to { background-position: -200% 0; } }
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(16px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* ‚îÄ‚îÄ UUID chip ‚îÄ‚îÄ */
    .uuid-chip {
      font-family: monospace;
      font-size: 11px;
      color: var(--muted);
      max-width: 120px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      display: inline-block;
    }

    /* ‚îÄ‚îÄ Pagination ‚îÄ‚îÄ */
    .pagination {
      display: flex;
      align-items: center;
      gap: 8px;
      justify-content: flex-end;
      margin-top: 16px;
      font-size: 13px;
    }
    .pagination button {
      background: var(--surface2);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 5px 12px;
      border-radius: 8px;
      cursor: pointer;
      font-family: inherit;
      font-size: 13px;
      transition: background 0.15s;
    }
    .pagination button:hover:not(:disabled) { background: var(--border); }
    .pagination button:disabled { opacity: 0.4; cursor: default; }
    .pagination .page-info { color: var(--muted); }

    /* ‚îÄ‚îÄ Tanggal filter ‚îÄ‚îÄ */
    .date-filter {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    .date-filter label { font-size: 13px; color: var(--muted); }
    .date-filter input[type="date"] {
      background: var(--surface2);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 8px 14px;
      border-radius: 10px;
      font-size: 13px;
      font-family: inherit;
      outline: none;
    }
    .date-filter input[type="date"]:focus { border-color: var(--accent); }
    .btn-today {
      background: transparent;
      border: 1px solid var(--accent);
      color: var(--accent);
      padding: 8px 14px;
      border-radius: 10px;
      font-size: 12px;
      cursor: pointer;
      font-family: inherit;
      transition: background 0.15s;
    }
    .btn-today:hover { background: rgba(122,158,126,0.1); }

    .last-update { font-size: 11px; color: var(--muted); }
  </style>
</head>
<body>

<header>
  <div class="logo">Lidan <span>Psikologi</span> ¬∑ Dashboard</div>
  <div class="header-right">
    <div class="date-badge">Hari ini: <strong id="headerDate">‚Äî</strong></div>
    <button class="btn-refresh" id="btnRefresh" onclick="loadAll()">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="23 4 23 10 17 10"/><polyline points="1 20 1 14 7 14"/>
        <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
      </svg>
      Refresh
    </button>
  </div>
</header>

<main>

  <!-- Date Filter -->
  <div class="date-filter">
    <label>Tampilkan tanggal:</label>
    <input type="date" id="dateFilter" />
    <button class="btn-today" onclick="setToday()">Hari ini</button>
    <span class="last-update" id="lastUpdate"></span>
  </div>

  <!-- Summary Cards -->
  <div class="summary-grid">
    <div class="stat-card green" style="animation-delay:0s">
      <div class="stat-icon">üë§</div>
      <div class="stat-label">Pengunjung Unik</div>
      <div class="stat-value" id="statUniq">‚Äî</div>
      <div class="stat-sub">UUID berbeda hari ini</div>
    </div>
    <div class="stat-card blue" style="animation-delay:0.05s">
      <div class="stat-icon">üëÜ</div>
      <div class="stat-label">Total Klik</div>
      <div class="stat-value" id="statClicks">‚Äî</div>
      <div class="stat-sub">Semua kunjungan</div>
    </div>
    <div class="stat-card gold" style="animation-delay:0.1s">
      <div class="stat-icon">üìÑ</div>
      <div class="stat-label">Layanan Diakses</div>
      <div class="stat-value" id="statPages">‚Äî</div>
      <div class="stat-sub">Halaman berbeda</div>
    </div>
    <div class="stat-card purple" style="animation-delay:0.15s">
      <div class="stat-icon">üîÅ</div>
      <div class="stat-label">Rata-rata Klik</div>
      <div class="stat-value" id="statAvg">‚Äî</div>
      <div class="stat-sub">Per pengunjung</div>
    </div>
  </div>

  <!-- Charts Row -->
  <div class="two-col">
    <div class="panel" style="animation-delay:0.2s">
      <div class="panel-header">
        <span class="panel-title">Kunjungan per Layanan</span>
      </div>
      <div class="panel-body">
        <div class="chart-wrap">
          <canvas id="chartLayanan"></canvas>
        </div>
      </div>
    </div>
    <div class="panel" style="animation-delay:0.25s">
      <div class="panel-header">
        <span class="panel-title">Distribusi Klik per Pengunjung</span>
      </div>
      <div class="panel-body">
        <div class="chart-wrap">
          <canvas id="chartKlik"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Detail Table -->
  <div class="panel" style="animation-delay:0.3s">
    <div class="panel-header">
      <span class="panel-title">Detail Kunjungan</span>
      <span class="last-update" id="totalRows"></span>
    </div>
    <div class="panel-body">

      <!-- Filter bar -->
      <div class="filter-bar">
        <label>Filter layanan:</label>
        <select id="filterSlug" onchange="renderTable()">
          <option value="">Semua layanan</option>
        </select>
        <label>Min. klik:</label>
        <select id="filterMinKlik" onchange="renderTable()">
          <option value="1">‚â• 1</option>
          <option value="2">‚â• 2</option>
          <option value="3">‚â• 3</option>
          <option value="5">‚â• 5</option>
        </select>
        <label>Urutkan:</label>
        <select id="sortBy" onchange="renderTable()">
          <option value="klik_desc">Klik (terbanyak)</option>
          <option value="jam_desc">Jam (terbaru)</option>
          <option value="jam_asc">Jam (terlama)</option>
        </select>
      </div>

      <div class="tbl-wrap">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Layanan</th>
              <th>Klik Hari Ini</th>
              <th>Jam Pertama</th>
              <th>Jam Terakhir</th>
              <th>UUID Pengunjung</th>
              <th>Referrer</th>
            </tr>
          </thead>
          <tbody id="tblBody">
            <tr><td colspan="7"><div class="skeleton"></div><div class="skeleton" style="width:70%"></div></td></tr>
          </tbody>
        </table>
      </div>
      <div class="pagination" id="pagination"></div>
    </div>
  </div>

</main>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const API_BASE   = "https://lidan-co-id.pages.dev/api/contacts_filter_dinamis7";
const API_TABLE  = "qr_kunjungan";
const API_SECRET = "admin";
const PAGE_SIZE  = 20;
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

let allData     = [];
let filteredData = [];
let currentPage  = 1;
let chartLayanan = null;
let chartKlik    = null;

function todayStr() {
  return new Date().toLocaleDateString('sv-SE');
}

function apiHeaders() {
  return { 'X-Custom-Auth': API_SECRET };
}

function setToday() {
  document.getElementById('dateFilter').value = todayStr();
  loadAll();
}

// Init
document.addEventListener('DOMContentLoaded', () => {
  const df = document.getElementById('dateFilter');
  df.value = todayStr();
  document.getElementById('headerDate').textContent = new Date().toLocaleDateString('id-ID', { weekday:'long', day:'numeric', month:'long', year:'numeric' });
  df.addEventListener('change', loadAll);
  loadAll();
});

async function loadAll() {
  const btn = document.getElementById('btnRefresh');
  btn.classList.add('loading');
  btn.textContent = '‚Ä¶';

  const date = document.getElementById('dateFilter').value || todayStr();

  try {
    const url = `${API_BASE}?table=${API_TABLE}&x_03_eq=${encodeURIComponent(date)}`;
    const res  = await fetch(url, { headers: apiHeaders() });
    const json = await res.json();

    allData = (json.success && json.data) ? json.data : [];
    document.getElementById('lastUpdate').textContent = 'Update: ' + new Date().toLocaleTimeString('id-ID');

    // Update header date label
    if (date === todayStr()) {
      document.getElementById('headerDate').textContent = new Date().toLocaleDateString('id-ID', { weekday:'long', day:'numeric', month:'long', year:'numeric' });
    } else {
      const d = new Date(date);
      document.getElementById('headerDate').textContent = d.toLocaleDateString('id-ID', { day:'numeric', month:'long', year:'numeric' });
    }

    buildFilterOptions();
    updateStats();
    renderCharts();
    renderTable();

  } catch (e) {
    console.error(e);
  }

  btn.classList.remove('loading');
  btn.innerHTML = `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"/><polyline points="1 20 1 14 7 14"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></svg> Refresh`;
}

function buildFilterOptions() {
  const slugs = [...new Set(allData.map(r => r.x_02).filter(Boolean))].sort();
  const sel   = document.getElementById('filterSlug');
  const prev  = sel.value;
  sel.innerHTML = '<option value="">Semua layanan</option>';
  slugs.forEach(s => {
    const opt = document.createElement('option');
    opt.value = s; opt.textContent = s;
    if (s === prev) opt.selected = true;
    sel.appendChild(opt);
  });
}

function updateStats() {
  const uniqs   = new Set(allData.map(r => r.x_01)).size;
  const totalKlik = allData.reduce((a, r) => a + parseInt(r.x_06 || 0), 0);
  const pages   = new Set(allData.map(r => r.x_02)).size;
  const avg     = uniqs > 0 ? (totalKlik / uniqs).toFixed(1) : '0';

  document.getElementById('statUniq').textContent   = uniqs;
  document.getElementById('statClicks').textContent = totalKlik;
  document.getElementById('statPages').textContent  = pages;
  document.getElementById('statAvg').textContent    = avg;
}

const COLORS = ['#7a9e7e','#6ab0d4','#d4a96a','#a085d4','#e07070','#70c5b0','#d4706a','#8ac5e0'];

function renderCharts() {
  // ‚îÄ‚îÄ Chart 1: kunjungan per layanan (bar) ‚îÄ‚îÄ
  const slugCount = {};
  allData.forEach(r => {
    const slug = r.x_02 || 'unknown';
    slugCount[slug] = (slugCount[slug] || 0) + parseInt(r.x_06 || 1);
  });
  const slugLabels = Object.keys(slugCount);
  const slugValues = slugLabels.map(k => slugCount[k]);

  if (chartLayanan) chartLayanan.destroy();
  const ctx1 = document.getElementById('chartLayanan').getContext('2d');
  chartLayanan = new Chart(ctx1, {
    type: 'bar',
    data: {
      labels: slugLabels,
      datasets: [{
        label: 'Total Klik',
        data: slugValues,
        backgroundColor: COLORS.slice(0, slugLabels.length),
        borderRadius: 8,
        borderSkipped: false,
      }]
    },
    options: {
      responsive: true, maintainAspectRatio: false,
      plugins: { legend: { display: false } },
      scales: {
        x: { ticks: { color: '#8a96ab', font: { size: 11 } }, grid: { color: '#1e2535' } },
        y: { ticks: { color: '#8a96ab', font: { size: 11 } }, grid: { color: '#1e2535' }, beginAtZero: true }
      }
    }
  });

  // ‚îÄ‚îÄ Chart 2: distribusi klik (doughnut) ‚îÄ‚îÄ
  const klikDist = { '1 klik': 0, '2 klik': 0, '3-5 klik': 0, '>5 klik': 0 };
  allData.forEach(r => {
    const k = parseInt(r.x_06 || 1);
    if      (k === 1)  klikDist['1 klik']++;
    else if (k === 2)  klikDist['2 klik']++;
    else if (k <= 5)   klikDist['3-5 klik']++;
    else               klikDist['>5 klik']++;
  });

  if (chartKlik) chartKlik.destroy();
  const ctx2 = document.getElementById('chartKlik').getContext('2d');
  chartKlik = new Chart(ctx2, {
    type: 'doughnut',
    data: {
      labels: Object.keys(klikDist),
      datasets: [{
        data: Object.values(klikDist),
        backgroundColor: ['#7a9e7e','#6ab0d4','#d4a96a','#a085d4'],
        borderWidth: 0,
        hoverOffset: 6
      }]
    },
    options: {
      responsive: true, maintainAspectRatio: false,
      cutout: '65%',
      plugins: {
        legend: {
          position: 'right',
          labels: { color: '#8a96ab', font: { size: 11 }, boxWidth: 12, padding: 14 }
        }
      }
    }
  });
}

function getFiltered() {
  const slug    = document.getElementById('filterSlug').value;
  const minKlik = parseInt(document.getElementById('filterMinKlik').value) || 1;
  const sort    = document.getElementById('sortBy').value;

  let rows = allData.filter(r => {
    if (slug && r.x_02 !== slug) return false;
    if (parseInt(r.x_06 || 1) < minKlik) return false;
    return true;
  });

  rows.sort((a, b) => {
    if (sort === 'klik_desc') return parseInt(b.x_06 || 1) - parseInt(a.x_06 || 1);
    if (sort === 'jam_desc')  return (b.x_05 || '').localeCompare(a.x_05 || '');
    if (sort === 'jam_asc')   return (a.x_04 || '').localeCompare(b.x_04 || '');
    return 0;
  });

  return rows;
}

function renderTable() {
  filteredData = getFiltered();
  currentPage  = 1;
  renderPage();
}

function renderPage() {
  const tbody = document.getElementById('tblBody');
  document.getElementById('totalRows').textContent = `${filteredData.length} baris`;

  if (filteredData.length === 0) {
    tbody.innerHTML = `<tr><td colspan="7">
      <div class="empty-state">
        <div class="empty-icon">üì≠</div>
        <div>Belum ada kunjungan untuk filter ini</div>
      </div>
    </td></tr>`;
    document.getElementById('pagination').innerHTML = '';
    return;
  }

  const start = (currentPage - 1) * PAGE_SIZE;
  const slice = filteredData.slice(start, start + PAGE_SIZE);
  const totalPages = Math.ceil(filteredData.length / PAGE_SIZE);

  tbody.innerHTML = slice.map((r, i) => {
    const no     = start + i + 1;
    const slug   = r.x_02 || '‚Äî';
    const clicks = parseInt(r.x_06 || 1);
    const jamAwal = r.x_04 || '‚Äî';
    const jamAkhir = r.x_05 || '‚Äî';
    const uuid   = r.x_01 || '‚Äî';
    const ref    = r.x_09 || '‚Äî';
    const hot    = clicks >= 3;

    return `<tr>
      <td style="color:var(--muted)">${no}</td>
      <td><span class="badge badge-green">${slug}</span></td>
      <td><span class="clicks-pill ${hot ? 'hot' : ''}" title="${clicks} klik">${clicks}</span></td>
      <td>${jamAwal}</td>
      <td>${jamAkhir}</td>
      <td><span class="uuid-chip" title="${uuid}">${uuid}</span></td>
      <td style="color:var(--muted);font-size:11px;max-width:160px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap" title="${ref}">${ref}</td>
    </tr>`;
  }).join('');

  // Pagination
  const pg = document.getElementById('pagination');
  if (totalPages <= 1) { pg.innerHTML = ''; return; }

  pg.innerHTML = `
    <button onclick="goPage(${currentPage-1})" ${currentPage===1?'disabled':''}>‚Äπ Prev</button>
    <span class="page-info">${currentPage} / ${totalPages}</span>
    <button onclick="goPage(${currentPage+1})" ${currentPage===totalPages?'disabled':''}>Next ‚Ä∫</button>
  `;
}

window.goPage = function(p) {
  currentPage = p;
  renderPage();
  document.querySelector('.panel:last-child').scrollIntoView({ behavior: 'smooth', block: 'start' });
};
</script>
</body>
</html>
